<mxfile host="app.diagrams.net" modified="2025-12-29T00:00:00.000Z" agent="5.0" version="24.0.0" type="device">
  <diagram name="Vietnamese AMR Parser - Detailed Architecture" id="system-arch-detailed">
    <mxGraphModel dx="1600" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1800" pageHeight="1400" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Title -->
        <mxCell id="title" value="Vietnamese AMR Parser - Detailed System Architecture" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=26;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="450" y="20" width="900" height="40" as="geometry" />
        </mxCell>

        <mxCell id="subtitle" value="Research Focus: AMR Parsing for Low-Resource Vietnamese | Demo: Model Comparison &amp; Applications" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontColor=#666666" vertex="1" parent="1">
          <mxGeometry x="400" y="60" width="1000" height="30" as="geometry" />
        </mxCell>

        <!-- ============================================ -->
        <!-- CLIENT LAYER -->
        <!-- ============================================ -->
        <mxCell id="client-layer-bg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#01579B;strokeWidth=3;opacity=30;" vertex="1" parent="1">
          <mxGeometry x="60" y="110" width="1680" height="160" as="geometry" />
        </mxCell>

        <mxCell id="client-layer-title" value="CLIENT LAYER" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;fontColor=#01579B" vertex="1" parent="1">
          <mxGeometry x="80" y="120" width="180" height="30" as="geometry" />
        </mxCell>

        <!-- User -->
        <mxCell id="user" value="" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;fillColor=#0277BD;strokeColor=#01579B;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="150" y="165" width="50" height="85" as="geometry" />
        </mxCell>

        <mxCell id="user-label" value="User" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="135" y="245" width="80" height="20" as="geometry" />
        </mxCell>

        <!-- Frontend React App -->
        <mxCell id="frontend" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1976D2;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="310" y="140" width="1390" height="110" as="geometry" />
        </mxCell>

        <mxCell id="frontend-title" value="FRONTEND - React.js SPA" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=15;fontStyle=1;fontColor=#1976D2" vertex="1" parent="1">
          <mxGeometry x="330" y="150" width="250" height="25" as="geometry" />
        </mxCell>

        <!-- Use Case Components -->
        <mxCell id="usecase1" value="&lt;b&gt;Use Case 1&lt;/b&gt;&lt;br&gt;AMR Tree Viz&lt;br&gt;&lt;br&gt;â€¢ Input box&lt;br&gt;â€¢ D3.js tree&lt;br&gt;â€¢ Role table&lt;br&gt;â€¢ PENMAN view" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#90CAF9;strokeColor=#1565C0;align=left;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="340" y="185" width="140" height="55" as="geometry" />
        </mxCell>

        <mxCell id="usecase2" value="&lt;b&gt;Use Case 2&lt;/b&gt;&lt;br&gt;Book Search&lt;br&gt;&lt;br&gt;â€¢ Query input&lt;br&gt;â€¢ Vector search&lt;br&gt;â€¢ AMR matching&lt;br&gt;â€¢ Results display" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#90CAF9;strokeColor=#1565C0;align=left;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="500" y="185" width="140" height="55" as="geometry" />
        </mxCell>

        <mxCell id="usecase3" value="&lt;b&gt;Use Case 3&lt;/b&gt;&lt;br&gt;Sentence Analysis&lt;br&gt;&lt;br&gt;â€¢ Paraphrase detect&lt;br&gt;â€¢ Fact comparison&lt;br&gt;â€¢ Role extraction" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#90CAF9;strokeColor=#1565C0;align=left;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="660" y="185" width="150" height="55" as="geometry" />
        </mxCell>

        <mxCell id="model-comparison" value="&lt;b&gt;Model Comparison&lt;/b&gt;&lt;br&gt;&lt;br&gt;Compare outputs:&lt;br&gt;â€¢ MTUP vs Baseline&lt;br&gt;â€¢ vs BARTpho&lt;br&gt;â€¢ Metrics display" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE082;strokeColor=#F57F17;align=left;fontSize=10;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="830" y="185" width="150" height="55" as="geometry" />
        </mxCell>

        <mxCell id="viz-libs" value="&lt;b&gt;Visualization&lt;/b&gt;&lt;br&gt;&lt;br&gt;â€¢ D3.js v7 (tree)&lt;br&gt;â€¢ Chart.js (metrics)&lt;br&gt;â€¢ React Flow&lt;br&gt;â€¢ TailwindCSS" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C5E1A5;strokeColor=#558B2F;align=left;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1000" y="185" width="140" height="55" as="geometry" />
        </mxCell>

        <mxCell id="state-mgmt" value="&lt;b&gt;State &amp; API&lt;/b&gt;&lt;br&gt;&lt;br&gt;â€¢ React Context&lt;br&gt;â€¢ Custom hooks&lt;br&gt;â€¢ Axios client&lt;br&gt;â€¢ Response cache" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C5E1A5;strokeColor=#558B2F;align=left;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1160" y="185" width="140" height="55" as="geometry" />
        </mxCell>

        <mxCell id="ui-components" value="&lt;b&gt;UI Components&lt;/b&gt;&lt;br&gt;&lt;br&gt;â€¢ Input forms&lt;br&gt;â€¢ Loading states&lt;br&gt;â€¢ Error handling&lt;br&gt;â€¢ Responsive layout" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C5E1A5;strokeColor=#558B2F;align=left;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1320" y="185" width="145" height="55" as="geometry" />
        </mxCell>

        <mxCell id="routing" value="&lt;b&gt;Routing&lt;/b&gt;&lt;br&gt;&lt;br&gt;React Router&lt;br&gt;â€¢ /visualize&lt;br&gt;â€¢ /search&lt;br&gt;â€¢ /analyze&lt;br&gt;â€¢ /compare" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BCAAA4;strokeColor=#5D4037;align=left;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1485" y="185" width="190" height="55" as="geometry" />
        </mxCell>

        <!-- User to Frontend arrow -->
        <mxCell id="user-to-frontend" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;strokeColor=#0288D1;" edge="1" parent="1" source="user" target="frontend">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="220" y="200" as="sourcePoint" />
            <mxPoint x="310" y="200" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="user-to-frontend-label" value="Browser&lt;br&gt;HTTPS" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#0288D1;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="230" y="185" width="60" height="30" as="geometry" />
        </mxCell>

        <!-- ============================================ -->
        <!-- API LAYER -->
        <!-- ============================================ -->
        <mxCell id="api-layer-bg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#6A1B9A;strokeWidth=3;opacity=30;" vertex="1" parent="1">
          <mxGeometry x="60" y="310" width="1680" height="160" as="geometry" />
        </mxCell>

        <mxCell id="api-layer-title" value="API LAYER - Backend Services" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;fontColor=#6A1B9A" vertex="1" parent="1">
          <mxGeometry x="80" y="320" width="300" height="30" as="geometry" />
        </mxCell>

        <!-- Backend Container -->
        <mxCell id="backend" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1BEE7;strokeColor=#7B1FA2;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="90" y="355" width="1620" height="100" as="geometry" />
        </mxCell>

        <mxCell id="backend-title" value="Node.js + Express.js Backend API Server" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#6A1B9A" vertex="1" parent="1">
          <mxGeometry x="110" y="365" width="350" height="25" as="geometry" />
        </mxCell>

        <!-- API Endpoints -->
        <mxCell id="api-endpoints" value="&lt;b&gt;REST Endpoints&lt;/b&gt;&lt;br&gt;&lt;br&gt;POST /api/parse&lt;br&gt;POST /api/search&lt;br&gt;POST /api/compare&lt;br&gt;GET /api/models&lt;br&gt;GET /api/health" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#CE93D8;strokeColor=#6A1B9A;align=left;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="120" y="395" width="145" height="50" as="geometry" />
        </mxCell>

        <!-- AMR Service -->
        <mxCell id="amr-service" value="&lt;b&gt;AMR Service&lt;/b&gt;&lt;br&gt;&lt;br&gt;â€¢ Model selector&lt;br&gt;â€¢ HF API client&lt;br&gt;â€¢ Response parser&lt;br&gt;â€¢ Error handling" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#CE93D8;strokeColor=#6A1B9A;align=left;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="285" y="395" width="140" height="50" as="geometry" />
        </mxCell>

        <!-- Search Service -->
        <mxCell id="search-service" value="&lt;b&gt;Search Service&lt;/b&gt;&lt;br&gt;&lt;br&gt;â€¢ Embedding gen&lt;br&gt;â€¢ Vector search&lt;br&gt;â€¢ AMR matching&lt;br&gt;â€¢ Ranking" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#CE93D8;strokeColor=#6A1B9A;align=left;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="445" y="395" width="140" height="50" as="geometry" />
        </mxCell>

        <!-- Comparison Service -->
        <mxCell id="compare-service" value="&lt;b&gt;Comparison Service&lt;/b&gt;&lt;br&gt;&lt;br&gt;â€¢ Parallel calls&lt;br&gt;â€¢ SMATCH calc&lt;br&gt;â€¢ Metrics aggreg&lt;br&gt;â€¢ Result format" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#CE93D8;strokeColor=#6A1B9A;align=left;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="605" y="395" width="150" height="50" as="geometry" />
        </mxCell>

        <!-- MongoDB Service -->
        <mxCell id="db-service" value="&lt;b&gt;DB Service&lt;/b&gt;&lt;br&gt;&lt;br&gt;â€¢ Mongoose ODM&lt;br&gt;â€¢ Query builder&lt;br&gt;â€¢ Connection pool&lt;br&gt;â€¢ Transaction mgmt" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#B39DDB;strokeColor=#512DA8;align=left;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="775" y="395" width="145" height="50" as="geometry" />
        </mxCell>

        <!-- Cache Service -->
        <mxCell id="cache-service" value="&lt;b&gt;Cache Service&lt;/b&gt;&lt;br&gt;&lt;br&gt;â€¢ In-memory cache&lt;br&gt;â€¢ Response cache&lt;br&gt;â€¢ Rate limiting&lt;br&gt;â€¢ TTL management" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#E65100;align=left;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="940" y="395" width="145" height="50" as="geometry" />
        </mxCell>

        <!-- AMR Parser Utils -->
        <mxCell id="amr-parser" value="&lt;b&gt;AMR Parser&lt;/b&gt;&lt;br&gt;&lt;br&gt;â€¢ PENMAN parse&lt;br&gt;â€¢ Graph builder&lt;br&gt;â€¢ Validation&lt;br&gt;â€¢ Formatting" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#E65100;align=left;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1105" y="395" width="135" height="50" as="geometry" />
        </mxCell>

        <!-- Similarity Calculator -->
        <mxCell id="similarity-calc" value="&lt;b&gt;Similarity Calc&lt;/b&gt;&lt;br&gt;&lt;br&gt;â€¢ SMATCH score&lt;br&gt;â€¢ Cosine sim&lt;br&gt;â€¢ Struct compare&lt;br&gt;â€¢ Role matching" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#E65100;align=left;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1260" y="395" width="140" height="50" as="geometry" />
        </mxCell>

        <!-- Error Handler & Logger -->
        <mxCell id="error-logger" value="&lt;b&gt;Error &amp; Logging&lt;/b&gt;&lt;br&gt;&lt;br&gt;â€¢ Winston logger&lt;br&gt;â€¢ Error middleware&lt;br&gt;â€¢ Request logging&lt;br&gt;â€¢ Debug mode" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#E65100;align=left;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1420" y="395" width="145" height="50" as="geometry" />
        </mxCell>

        <!-- Config & Env -->
        <mxCell id="config-env" value="&lt;b&gt;Config&lt;/b&gt;&lt;br&gt;&lt;br&gt;â€¢ .env vars&lt;br&gt;â€¢ API keys&lt;br&gt;â€¢ CORS&lt;br&gt;â€¢ Timeouts" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BCAAA4;strokeColor=#5D4037;align=left;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1585" y="395" width="110" height="50" as="geometry" />
        </mxCell>

        <!-- Frontend to Backend arrow -->
        <mxCell id="frontend-to-backend" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;strokeWidth=3;strokeColor=#7B1FA2;" edge="1" parent="1" source="frontend" target="backend">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="900" y="260" as="sourcePoint" />
            <mxPoint x="900" y="355" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="frontend-to-backend-label" value="REST API&lt;br&gt;JSON Request/Response&lt;br&gt;CORS enabled" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#7B1FA2;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="850" y="270" width="170" height="45" as="geometry" />
        </mxCell>

        <!-- ============================================ -->
        <!-- AI MODELS LAYER - DETAILED -->
        <!-- ============================================ -->
        <mxCell id="models-layer-bg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#E65100;strokeWidth=3;opacity=30;" vertex="1" parent="1">
          <mxGeometry x="60" y="510" width="1680" height="520" as="geometry" />
        </mxCell>

        <mxCell id="models-layer-title" value="AI MODELS LAYER - Training &amp; Inference Architecture" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;fontColor=#E65100" vertex="1" parent="1">
          <mxGeometry x="80" y="520" width="550" height="30" as="geometry" />
        </mxCell>

        <!-- ========== GPU SERVER ========== -->
        <mxCell id="gpu-server-bg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#EF6C00;strokeWidth=3;" vertex="1" parent="1">
          <mxGeometry x="90" y="560" width="800" height="440" as="geometry" />
        </mxCell>

        <mxCell id="gpu-server-title" value="ðŸ–¥ï¸ LOCAL GPU SERVER (ISLAB)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#E65100" vertex="1" parent="1">
          <mxGeometry x="280" y="570" width="420" height="30" as="geometry" />
        </mxCell>

        <mxCell id="gpu-specs" value="Hardware: Quadro RTX 6000 (24GB VRAM) | OS: Ubuntu 20.04 | CUDA 11.8" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#BF360C;fontStyle=2" vertex="1" parent="1">
          <mxGeometry x="200" y="600" width="580" height="20" as="geometry" />
        </mxCell>

        <!-- Model 1: MTUP -->
        <mxCell id="model1-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#A5D6A7;strokeColor=#2E7D32;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="120" y="635" width="230" height="340" as="geometry" />
        </mxCell>

        <mxCell id="model1-title" value="MODEL 1: MTUP âœ…" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1;fontColor=#1B5E20" vertex="1" parent="1">
          <mxGeometry x="130" y="645" width="210" height="25" as="geometry" />
        </mxCell>

        <mxCell id="model1-base" value="&lt;b&gt;Base Model&lt;/b&gt;&lt;br&gt;Qwen/Qwen2.5-3B-Instruct&lt;br&gt;Parameters: 3.09B&lt;br&gt;Context: 32K tokens" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#388E3C;align=left;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="135" y="675" width="200" height="45" as="geometry" />
        </mxCell>

        <mxCell id="model1-lora" value="&lt;b&gt;LoRA Adapter&lt;/b&gt;&lt;br&gt;Rank: 64&lt;br&gt;Alpha: 128&lt;br&gt;Trainable params: ~67M&lt;br&gt;Target: q,k,v,o,gate,up,down" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#81C784;strokeColor=#2E7D32;align=left;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="135" y="730" width="200" height="60" as="geometry" />
        </mxCell>

        <mxCell id="model1-training" value="&lt;b&gt;Training Config&lt;/b&gt;&lt;br&gt;Strategy: MTUP (2-task)&lt;br&gt;Epochs: 15&lt;br&gt;Batch: 4 Ã— 4 grad accum&lt;br&gt;LR: 2e-4 (cosine)&lt;br&gt;FP16: Enabled&lt;br&gt;Optimizer: AdamW 8-bit" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#81C784;strokeColor=#2E7D32;align=left;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="135" y="800" width="200" height="75" as="geometry" />
        </mxCell>

        <mxCell id="model1-results" value="&lt;b&gt;Results&lt;/b&gt;&lt;br&gt;Status: âœ… Trained&lt;br&gt;Training time: ~9 hours&lt;br&gt;F1 Score: ~0.50 (target)&lt;br&gt;Model size: 945MB&lt;br&gt;Deployed: HuggingFace" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4CAF50;strokeColor=#1B5E20;align=left;fontSize=9;fontStyle=1;fontColor=white" vertex="1" parent="1">
          <mxGeometry x="135" y="885" width="200" height="75" as="geometry" />
        </mxCell>

        <!-- Model 2: Baseline -->
        <mxCell id="model2-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE082;strokeColor=#F57F17;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="370" y="635" width="230" height="340" as="geometry" />
        </mxCell>

        <mxCell id="model2-title" value="MODEL 2: BASELINE â³" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1;fontColor=#F57F17" vertex="1" parent="1">
          <mxGeometry x="380" y="645" width="210" height="25" as="geometry" />
        </mxCell>

        <mxCell id="model2-base" value="&lt;b&gt;Base Model&lt;/b&gt;&lt;br&gt;Qwen/Qwen2.5-3B-Instruct&lt;br&gt;Parameters: 3.09B&lt;br&gt;Same as MTUP" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#F9A825;align=left;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="385" y="675" width="200" height="45" as="geometry" />
        </mxCell>

        <mxCell id="model2-lora" value="&lt;b&gt;LoRA Adapter&lt;/b&gt;&lt;br&gt;Rank: 128 (larger)&lt;br&gt;Alpha: 256&lt;br&gt;Trainable params: ~134M&lt;br&gt;Target: same modules" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF59D;strokeColor=#F9A825;align=left;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="385" y="730" width="200" height="60" as="geometry" />
        </mxCell>

        <mxCell id="model2-training" value="&lt;b&gt;Training Config&lt;/b&gt;&lt;br&gt;Strategy: Single-task (direct)&lt;br&gt;Epochs: 10&lt;br&gt;Batch: 2 Ã— 8 grad accum&lt;br&gt;LR: 2e-4 (cosine)&lt;br&gt;FP16: Enabled&lt;br&gt;Optimizer: AdamW 8-bit" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF59D;strokeColor=#F9A825;align=left;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="385" y="800" width="200" height="75" as="geometry" />
        </mxCell>

        <mxCell id="model2-results" value="&lt;b&gt;Results&lt;/b&gt;&lt;br&gt;Status: â³ Training needed&lt;br&gt;Training time: ~6 hours (est)&lt;br&gt;F1 Score: ~0.45 (expected)&lt;br&gt;Model size: ~950MB (est)&lt;br&gt;Deploy: After training" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FBC02D;strokeColor=#F57F17;align=left;fontSize=9;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="385" y="885" width="200" height="75" as="geometry" />
        </mxCell>

        <!-- Model 3: BARTpho -->
        <mxCell id="model3-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#B39DDB;strokeColor=#512DA8;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="620" y="635" width="230" height="340" as="geometry" />
        </mxCell>

        <mxCell id="model3-title" value="MODEL 3: BARTpho âœ…" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1;fontColor=#311B92" vertex="1" parent="1">
          <mxGeometry x="630" y="645" width="210" height="25" as="geometry" />
        </mxCell>

        <mxCell id="model3-base" value="&lt;b&gt;Base Model&lt;/b&gt;&lt;br&gt;vinai/bartpho-word&lt;br&gt;Parameters: 135M&lt;br&gt;Vietnamese pretrained" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D1C4E9;strokeColor=#673AB7;align=left;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="635" y="675" width="200" height="45" as="geometry" />
        </mxCell>

        <mxCell id="model3-lora" value="&lt;b&gt;Fine-tuning&lt;/b&gt;&lt;br&gt;Full fine-tuning (no LoRA)&lt;br&gt;Trainable params: All 135M&lt;br&gt;Low-resource approach" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#CE93D8;strokeColor=#7B1FA2;align=left;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="635" y="730" width="200" height="60" as="geometry" />
        </mxCell>

        <mxCell id="model3-training" value="&lt;b&gt;Training Config&lt;/b&gt;&lt;br&gt;Strategy: Seq2seq&lt;br&gt;Epochs: 20&lt;br&gt;Batch: 8&lt;br&gt;LR: 5e-5&lt;br&gt;Word-level tokenization&lt;br&gt;Max length: 512" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#CE93D8;strokeColor=#7B1FA2;align=left;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="635" y="800" width="200" height="75" as="geometry" />
        </mxCell>

        <mxCell id="model3-results" value="&lt;b&gt;Results&lt;/b&gt;&lt;br&gt;Status: âœ… Trained&lt;br&gt;Training time: ~4 hours&lt;br&gt;F1 Score: TBD&lt;br&gt;Model size: ~540MB&lt;br&gt;Purpose: Low-resource baseline" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#9C27B0;strokeColor=#4A148C;align=left;fontSize=9;fontStyle=1;fontColor=white" vertex="1" parent="1">
          <mxGeometry x="635" y="885" width="200" height="75" as="geometry" />
        </mxCell>

        <!-- ========== RESEARCH MODELS (NOT EXPOSED) ========== -->
        <mxCell id="research-models-bg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E0E0E0;strokeColor=#757575;strokeWidth=2;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="920" y="560" width="800" height="440" as="geometry" />
        </mxCell>

        <mxCell id="research-title" value="ðŸ”¬ RESEARCH MODELS (Not Exposed in API)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#424242" vertex="1" parent="1">
          <mxGeometry x="1080" y="570" width="480" height="30" as="geometry" />
        </mxCell>

        <mxCell id="research-note" value="These models are used for research comparison only - not deployed in demo API" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#757575;fontStyle=2" vertex="1" parent="1">
          <mxGeometry x="1020" y="600" width="600" height="20" as="geometry" />
        </mxCell>

        <!-- Model 4: BARTpho Syllable -->
        <mxCell id="model4-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#EEEEEE;strokeColor=#9E9E9E;strokeWidth=2;dashed=1" vertex="1" parent="1">
          <mxGeometry x="950" y="635" width="350" height="155" as="geometry" />
        </mxCell>

        <mxCell id="model4-title" value="MODEL 4: BARTpho-Syllable" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#424242" vertex="1" parent="1">
          <mxGeometry x="970" y="645" width="300" height="25" as="geometry" />
        </mxCell>

        <mxCell id="model4-info" value="&lt;b&gt;Base:&lt;/b&gt; vinai/bartpho-syllable (135M params)&lt;br&gt;&lt;b&gt;Tokenization:&lt;/b&gt; Syllable-level (finer granularity)&lt;br&gt;&lt;b&gt;Training:&lt;/b&gt; Full fine-tuning, 20 epochs&lt;br&gt;&lt;b&gt;Purpose:&lt;/b&gt; Compare word vs syllable tokenization&lt;br&gt;&lt;b&gt;Expected F1:&lt;/b&gt; Similar to word-level (~0.42-0.46)&lt;br&gt;&lt;b&gt;Status:&lt;/b&gt; Research only, not in demo API" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#F5F5F5;strokeColor=#9E9E9E;align=left;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="970" y="675" width="310" height="100" as="geometry" />
        </mxCell>

        <!-- Model 5: ViT5 -->
        <mxCell id="model5-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#EEEEEE;strokeColor=#9E9E9E;strokeWidth=2;dashed=1" vertex="1" parent="1">
          <mxGeometry x="950" y="810" width="350" height="165" as="geometry" />
        </mxCell>

        <mxCell id="model5-title" value="MODEL 5: ViT5" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#424242" vertex="1" parent="1">
          <mxGeometry x="970" y="820" width="300" height="25" as="geometry" />
        </mxCell>

        <mxCell id="model5-info" value="&lt;b&gt;Base:&lt;/b&gt; VietAI/vit5-base (223M params)&lt;br&gt;&lt;b&gt;Architecture:&lt;/b&gt; T5 encoder-decoder&lt;br&gt;&lt;b&gt;Training:&lt;/b&gt; Full fine-tuning, text-to-text approach&lt;br&gt;&lt;b&gt;Epochs:&lt;/b&gt; 15, batch size 4&lt;br&gt;&lt;b&gt;Purpose:&lt;/b&gt; Compare T5 vs BART architecture&lt;br&gt;&lt;b&gt;Low-resource:&lt;/b&gt; Vietnamese-specific pretraining&lt;br&gt;&lt;b&gt;Expected F1:&lt;/b&gt; ~0.43-0.47&lt;br&gt;&lt;b&gt;Status:&lt;/b&gt; Research only, not in demo API" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#F5F5F5;strokeColor=#9E9E9E;align=left;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="970" y="850" width="310" height="110" as="geometry" />
        </mxCell>

        <!-- Research Comparison Table -->
        <mxCell id="research-comparison" value="&lt;b&gt;Research Comparison Goals:&lt;/b&gt;&lt;br&gt;&lt;br&gt;â€¢ Large vs Small models (3B vs 135M vs 223M)&lt;br&gt;â€¢ MTUP vs Single-task strategies&lt;br&gt;â€¢ Word vs Syllable tokenization&lt;br&gt;â€¢ BART vs T5 architectures&lt;br&gt;â€¢ LoRA vs Full fine-tuning&lt;br&gt;â€¢ Low-resource Vietnamese models" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#F57F17;align=left;fontSize=9;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1320" y="635" width="380" height="130" as="geometry" />
        </mxCell>

        <!-- Expected Results Table -->
        <mxCell id="expected-results" value="&lt;b&gt;Expected F1 Scores (SMATCH):&lt;/b&gt;&lt;br&gt;&lt;br&gt;MTUP (3B): ~0.50 â­ Best&lt;br&gt;Baseline (3B): ~0.45&lt;br&gt;BARTpho-word: ~0.43&lt;br&gt;BARTpho-syl: ~0.42&lt;br&gt;ViT5: ~0.44&lt;br&gt;&lt;br&gt;&lt;i&gt;Hypothesis: MTUP + larger model&lt;br&gt;performs best for Vietnamese AMR&lt;/i&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#01579B;align=left;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1320" y="785" width="380" height="140" as="geometry" />
        </mxCell>

        <!-- Deployment Note -->
        <mxCell id="deployment-note" value="&lt;b&gt;API Deployment Strategy:&lt;/b&gt;&lt;br&gt;&lt;br&gt;âœ… Expose: MTUP, Baseline, BARTpho-word (3 models)&lt;br&gt;âŒ Hidden: BARTpho-syl, ViT5 (research only)&lt;br&gt;&lt;br&gt;Reason: Demo focuses on best performing models&lt;br&gt;and practical comparison. Full research results&lt;br&gt;will be in thesis chapter." style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#E65100;align=left;fontSize=9;fontStyle=2" vertex="1" parent="1">
          <mxGeometry x="1320" y="945" width="380" height="100" as="geometry" />
        </mxCell>

        <!-- ========== HUGGINGFACE & NGROK ========== -->
        <mxCell id="hf-ngrok-bg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#EF6C00;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="90" y="1050" width="1620" height="140" as="geometry" />
        </mxCell>

        <mxCell id="hf-ngrok-title" value="ðŸŒ DEPLOYMENT INFRASTRUCTURE" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#E65100" vertex="1" parent="1">
          <mxGeometry x="110" y="1060" width="350" height="25" as="geometry" />
        </mxCell>

        <!-- HuggingFace -->
        <mxCell id="huggingface" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#EF6C00;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="120" y="1095" width="500" height="80" as="geometry" />
        </mxCell>

        <mxCell id="hf-title" value="ðŸ¤— HuggingFace Model Hub" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1;fontColor=#BF360C" vertex="1" parent="1">
          <mxGeometry x="140" y="1105" width="250" height="20" as="geometry" />
        </mxCell>

        <mxCell id="hf-models" value="&lt;b&gt;Hosted Models:&lt;/b&gt;&lt;br&gt;â€¢ username/vietnamese-amr-mtup-qwen&lt;br&gt;â€¢ username/vietnamese-amr-baseline-qwen&lt;br&gt;â€¢ username/vietnamese-amr-bartpho&lt;br&gt;&lt;br&gt;&lt;b&gt;Access:&lt;/b&gt; Public repos, HF Inference API" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFCC80;strokeColor=#E65100;align=left;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="140" y="1130" width="460" height="35" as="geometry" />
        </mxCell>

        <!-- Ngrok Tunnel -->
        <mxCell id="ngrok" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#EF6C00;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="650" y="1095" width="500" height="80" as="geometry" />
        </mxCell>

        <mxCell id="ngrok-title" value="ðŸ”— Ngrok Tunnel" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1;fontColor=#BF360C" vertex="1" parent="1">
          <mxGeometry x="670" y="1105" width="200" height="20" as="geometry" />
        </mxCell>

        <mxCell id="ngrok-info" value="&lt;b&gt;Purpose:&lt;/b&gt; Expose local GPU server to internet&lt;br&gt;&lt;b&gt;URL:&lt;/b&gt; https://xyz.ngrok.io â†’ localhost:8000&lt;br&gt;&lt;b&gt;Protocol:&lt;/b&gt; HTTP tunnel with TLS&lt;br&gt;&lt;b&gt;Why:&lt;/b&gt; Models run locally, accessible globally&lt;br&gt;without cloud GPU costs" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFCC80;strokeColor=#E65100;align=left;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="670" y="1130" width="460" height="35" as="geometry" />
        </mxCell>

        <!-- Inference Flow -->
        <mxCell id="inference-flow" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#EF6C00;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1180" y="1095" width="500" height="80" as="geometry" />
        </mxCell>

        <mxCell id="inference-title" value="âš¡ Inference Flow" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1;fontColor=#BF360C" vertex="1" parent="1">
          <mxGeometry x="1200" y="1105" width="200" height="20" as="geometry" />
        </mxCell>

        <mxCell id="inference-steps" value="1. Backend API â†’ Ngrok URL&lt;br&gt;2. Ngrok â†’ Local GPU server (FastAPI)&lt;br&gt;3. Load model from HF Hub (cached)&lt;br&gt;4. Run inference (tokenize â†’ generate â†’ parse)&lt;br&gt;5. Return AMR JSON&lt;br&gt;&lt;br&gt;&lt;b&gt;Latency:&lt;/b&gt; ~2-5 seconds per request" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFCC80;strokeColor=#E65100;align=left;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1200" y="1130" width="460" height="35" as="geometry" />
        </mxCell>

        <!-- Backend to Models arrow -->
        <mxCell id="backend-to-models" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;strokeWidth=3;strokeColor=#EF6C00;" edge="1" parent="1" source="backend" target="gpu-server-bg">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="470" as="sourcePoint" />
            <mxPoint x="490" y="560" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="backend-to-models-label" value="HTTP POST&lt;br&gt;via Ngrok tunnel&lt;br&gt;JSON payload" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#EF6C00;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="320" y="475" width="120" height="45" as="geometry" />
        </mxCell>

        <!-- Backend to Database arrow -->
        <mxCell id="backend-to-db" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;strokeWidth=3;strokeColor=#388E3C;" edge="1" parent="1" source="backend" target="mongodb-section">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1100" y="470" as="sourcePoint" />
            <mxPoint x="1250" y="560" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="backend-to-db-label" value="MongoDB Driver&lt;br&gt;Mongoose ODM&lt;br&gt;Vector search" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#388E3C;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1320" y="475" width="130" height="45" as="geometry" />
        </mxCell>

        <!-- ============================================ -->
        <!-- DATABASE LAYER -->
        <!-- ============================================ -->
        <mxCell id="db-layer-bg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#2E7D32;strokeWidth=3;opacity=30;" vertex="1" parent="1">
          <mxGeometry x="60" y="1230" width="1680" height="140" as="geometry" />
        </mxCell>

        <mxCell id="db-layer-title" value="DATABASE LAYER" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;fontColor=#2E7D32" vertex="1" parent="1">
          <mxGeometry x="80" y="1240" width="220" height="30" as="geometry" />
        </mxCell>

        <!-- MongoDB Atlas -->
        <mxCell id="mongodb-section" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#388E3C;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="90" y="1275" width="1620" height="80" as="geometry" />
        </mxCell>

        <mxCell id="mongodb-title" value="ðŸƒ MongoDB Atlas (Cloud - Free Tier M0)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#1B5E20" vertex="1" parent="1">
          <mxGeometry x="110" y="1285" width="350" height="25" as="geometry" />
        </mxCell>

        <!-- Books Collection -->
        <mxCell id="books-collection" value="&lt;b&gt;books Collection&lt;/b&gt;&lt;br&gt;&lt;br&gt;Fields: title, author, description, genre, publishYear,&lt;br&gt;tags[], semanticContent, embedding[384], amr (string),&lt;br&gt;coreSemantics, storyType&lt;br&gt;&lt;br&gt;Index: embedding (vector search)&lt;br&gt;Documents: ~100 books" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#A5D6A7;strokeColor=#2E7D32;align=left;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="120" y="1315" width="470" height="30" as="geometry" />
        </mxCell>

        <!-- Vector Search -->
        <mxCell id="vector-search" value="&lt;b&gt;Atlas Vector Search&lt;/b&gt;&lt;br&gt;&lt;br&gt;Type: Cosine similarity&lt;br&gt;Embedding model: text-embedding-ada-002&lt;br&gt;Dimensions: 384&lt;br&gt;Index: HNSW algorithm&lt;br&gt;Query: $vectorSearch aggregation" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#81C784;strokeColor=#2E7D32;align=left;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="610" y="1315" width="380" height="30" as="geometry" />
        </mxCell>

        <!-- AMR Enrichment -->
        <mxCell id="amr-enrichment" value="&lt;b&gt;AMR Enrichment Process&lt;/b&gt;&lt;br&gt;&lt;br&gt;1. User searches for book&lt;br&gt;2. Vector search returns candidates&lt;br&gt;3. Parse query with AMR model&lt;br&gt;4. Match AMR structure against book AMRs&lt;br&gt;5. Rank by semantic similarity&lt;br&gt;6. Return enhanced results" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4CAF50;strokeColor=#1B5E20;align=left;fontSize=9;fontColor=white;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1010" y="1315" width="330" height="30" as="geometry" />
        </mxCell>

        <!-- Future Collections -->
        <mxCell id="future-db" value="&lt;b&gt;Future Collections&lt;/b&gt;&lt;br&gt;&lt;br&gt;â€¢ cache (API responses)&lt;br&gt;â€¢ analytics (usage stats)&lt;br&gt;â€¢ queries (search history)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E0E0E0;strokeColor=#757575;align=left;fontSize=9;dashed=1" vertex="1" parent="1">
          <mxGeometry x="1360" y="1315" width="320" height="30" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
